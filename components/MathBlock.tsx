{
  "content": "import { Platform, StyleSheet, View } from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport { BlockMath, InlineMath } from 'react-katex';\nimport 'katex/dist/katex.min.css';\n\ninterface MathBlockProps {\n  formula: string;\n  inline?: boolean;\n}\n\nexport function MathBlock({ formula, inline = false }: MathBlockProps) {\n  if (Platform.OS === 'web') {\n    return inline ? (\n      <InlineMath math={formula} />\n    ) : (\n      <BlockMath math={formula} />\n    );\n  }\n\n  // For native platforms, use WebView with KaTeX\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css\">\n        <script src=\"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js\"></script>\n        <style>\n          body {\n            margin: 0;\n            padding: 8px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: ${inline ? '24px' : '48px'};\n            background-color: transparent;\n          }\n          .math-container {\n            display: ${inline ? 'inline-block' : 'block'};\n            width: 100%;\n            text-align: ${inline ? 'left' : 'center'};\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"math-container\" id=\"formula\"></div>\n        <script>\n          katex.render(${JSON.stringify(formula)}, document.getElementById('formula'), {\n            displayMode: ${!inline},\n            throwOnError: false,\n            output: 'html'\n          });\n        </script>\n      </body>\n    </html>\n  `;\n\n  return (\n    <View style={[styles.container, inline ? styles.inlineContainer : styles.blockContainer]}>\n      <WebView\n        source={{ html }}\n        style={styles.webview}\n        scrollEnabled={false}\n        showsHorizontalScrollIndicator={false}\n        showsVerticalScrollIndicator={false}\n        androidLayerType=\"software\"\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'transparent',\n    overflow: 'hidden',\n  },\n  inlineContainer: {\n    height: 24,\n    marginVertical: 2,\n  },\n  blockContainer: {\n    height: 48,\n    marginVertical: 8,\n  },\n  webview: {\n    backgroundColor: 'transparent',\n  },\n});"
}